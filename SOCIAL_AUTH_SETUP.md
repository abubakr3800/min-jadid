# إعداد تسجيل الدخول الاجتماعي لجميع المنافذ

## المشكلة
Firebase يتطلب إضافة النطاقات المصرح بها في Firebase Console. عند تشغيل التطبيق على منافذ مختلفة، قد تواجه مشكلة "This domain is not authorized for OAuth operations".

## الحلول

### الحل الأول: إضافة جميع المنافذ في Firebase Console

1. اذهب إلى [Firebase Console](https://console.firebase.google.com/)
2. اختر مشروعك `min-jaded`
3. اذهب إلى **Authentication** > **Settings** > **Authorized domains**
4. أضف النطاقات التالية:
   - `localhost`
   - `localhost:8000`
   - `localhost:3000`
   - `localhost:8080`
   - `127.0.0.1`
   - `127.0.0.1:8000`
   - `127.0.0.1:3000`
   - `127.0.0.1:8080`

### الحل الثاني: استخدام صفحة الاختبار البسيط

إذا لم تكن تريد إضافة جميع المنافذ، يمكنك استخدام صفحة الاختبار البسيط:

1. شغل الخادم على المنفذ 8000:
   ```bash
   php -S localhost:8000
   ```

2. اذهب إلى: `http://localhost:8000/simple-test.html`

3. هذه الصفحة مصممة خصيصاً للاختبار وتعمل بشكل أفضل مع Firebase.

### الحل الثالث: التحديث التلقائي

تم تحديث `login.php` ليعمل تلقائياً على أي منفذ:

- يكتشف المنفذ الحالي تلقائياً
- يوجه المستخدم لصفحة الاختبار البسيط على نفس المنفذ
- يعرض رسائل خطأ مفيدة

## كيفية الاستخدام

### تشغيل الخادم على المنفذ 8000:
```bash
php -S localhost:8000
```

### الوصول للتطبيق:
- الصفحة الرئيسية: `http://localhost:8000`
- صفحة تسجيل الدخول: `http://localhost:8000/login.php`
- صفحة الاختبار البسيط: `http://localhost:8000/simple-test.html`

### اختبار تسجيل الدخول الاجتماعي:
1. اذهب إلى `http://localhost:8000/login.php`
2. جرب أزرار Google أو Facebook
3. إذا واجهت مشكلة، اضغط على "استخدم صفحة الاختبار البسيط"
4. أو اذهب مباشرة إلى `http://localhost:8000/simple-test.html`

## ملاحظات مهمة

- **المنفذ 8000**: يعمل بشكل أفضل مع Firebase
- **المنفذ 8080**: يمكن استخدامه للاختبار البسيط
- **المنفذ 3000**: قد يحتاج إضافة في Firebase Console

## استكشاف الأخطاء

إذا واجهت مشاكل:

1. **تأكد من إضافة النطاق في Firebase Console**
2. **امسح ذاكرة التخزين المؤقت للمتصفح**
3. **انتظر بضع دقائق بعد إضافة النطاق**
4. **استخدم صفحة الاختبار البسيط**

## الملفات المحدثة

- `login.php`: تم تحديثه ليعمل على جميع المنافذ
- `simple-test.html`: صفحة اختبار مخصصة
- `api/social-auth.php`: معالج تسجيل الدخول الاجتماعي

## الدعم

إذا استمرت المشكلة، راجع:
- `FIREBASE_SETUP.md`
- `حل-مشكلة-فيربيس.md`
- `README-FIREBASE-FIX.md` 